package me.feng3d.fagal.fragment.light
{
	import me.feng3d.core.register.Register;
	import me.feng3d.fagal.base.getFreeTemp;
	import me.feng3d.fagal.base.removeTemp;
	import me.feng3d.fagal.base.operation.add;
	import me.feng3d.fagal.base.operation.mul;

	/**
	 * 环境光片段渲染程序
	 * @author warden_feng 2014-11-7
	 */
	public function F_Ambient(ambientInputReg:Register, finalColorReg:Register, mdiffReg:Register):void
	{
		var blendAmbientReg:Register = getFreeTemp("混合环境光");

		//混合漫反射光
		mul(blendAmbientReg, mdiffReg, ambientInputReg);
		//添加到最终颜色
		add(finalColorReg.xyz, finalColorReg, blendAmbientReg);

		removeTemp(mdiffReg);
	}
}
